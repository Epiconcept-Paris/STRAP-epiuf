---
title: "DummyData"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{DummyData}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r , setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(epiuf)
library(kableExtra)

```

## Dataset : DummyData 

This document show how DummyData was built
```{r, config, echo = TRUE, include=TRUE}

# probability of NA in a vector to add missing data as well
prob_na <- 0.2 

# Generate a dataset with 100 observations
n <- 100
yearlen <- 365 # length of a year in days

# Generate ID variable
id <- 1:n

# Generate character variable (Country)
# Use refsite to create the columns 
refsite <- epiuf::RefSite
country <- rep(x = unique(refsite$Label)[c(1,6,18,29)],times=(n/4))
countrycode <- refsite$CountryISO2Code[refsite$LocationName%in%country]
countryid <- refsite$ID[refsite$LocationName%in%country]

# Generate numeric variable (Age)
age <- rep(c(45, 50, 55, 60, 65), length.out = n)

# Generate factor variable (Covid Brand)
covvaccbr <- sample(c("Pfizer", "Moderna", "Astra Zeneca"), n, replace = TRUE)

# Generate binary variable (Covid Case)
case <- sample(0:1, n, replace = TRUE,prob = c(0.75,0.25))

# Date of infection 
datepos <- as.Date("2021-03-01") + sample((0:365)*2, n, replace = TRUE)
datepos[which(case==0)] <- NA

# Date of enrolment in the study
enrolmentdate <- as.Date("2021-05-01") + sample(0:yearlen, n, replace = TRUE)
# Generate date variable (Vaccination Date)
vaccdate <- as.Date("2021-01-01") + sample(0:(yearlen*2), n, replace = TRUE)
vaccdate <- as.Date(ifelse(runif(n) < prob_na, NA, vaccdate),origin = "1970-01-01")
covvaccbr[which(is.na(vaccdate))] <- NA

# Create the dataset
DummyData <- data.frame(
  id = id,
  country = as.factor(country),
  countrycode = as.factor(countrycode),
  countryid = as.factor(countryid),
  age = age,
  enrolmentdate = enrolmentdate,
  covvaccbr = as.factor(covvaccbr),
  vaccdate = vaccdate,
  case = case,
  datepos = datepos
)

# Print the first few rows of the dataset
head(DummyData)


```




