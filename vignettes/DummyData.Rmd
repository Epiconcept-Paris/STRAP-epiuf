---
title: "DummyData"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{DummyData}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r , setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(epiuf)
library(kableExtra)

```

## Dataset : DummyData 

This document show how DummyData was built
```{r, config, echo = TRUE, include=TRUE}

# probability of NA in a vector to add missing data as well
prob_na <- 0.2 

# Generate a dataset with 100 observations
n <- 100
yearlen <- 365 # length of a year in days

# Generate ID variable
id <- 1:n

# Generate character variable (Country)
# Use refsite to create the columns 
refsite <- epiuf::RefSite
country <- rep(x = unique(refsite$LocationName)[c(1,6,18,29)],times=(n/4))
CountryCode <- refsite$CountryISO2Code[refsite$LocationName%in%country]
CountryId <- refsite$ID[refsite$LocationName%in%country]

# Generate numeric variable (Age)
age <- rep(c(45, 50, 55, 60, 65), length.out = n)

# Generate factor variable (Covid Brand)
CovVaccBr <- sample(c("Pfizer", "Moderna", "Astra Zeneca"), n, replace = TRUE)

# Generate binary variable (Covid Case)
case <- sample(0:1, n, replace = TRUE,prob = c(0.75,0.25))

# Date of infection 
DatePos <- as.Date("2021-03-01") + sample((0:365)*2, n, replace = TRUE)
DatePos[which(case==0)] <- NA

# Date of enrolment in the study
EnrolmentDate <- as.Date("2021-05-01") + sample(0:yearlen, n, replace = TRUE)
# Generate date variable (Vaccination Date)
VaccDate <- as.Date("2021-01-01") + sample(0:(yearlen*2), n, replace = TRUE)
VaccDate <- as.Date(ifelse(runif(n) < prob_na, NA, VaccDate),origin = "1970-01-01")
CovVaccBr[which(is.na(VaccDate))] <- NA

# Create the dataset
DummyData <- data.frame(
  id = id,
  country = as.factor(country),
  CountryCode = as.factor(CountryCode),
  CountryId = as.factor(CountryId),
  age = age,
  EnrolmentDate = EnrolmentDate,
  CovVaccBr = as.factor(CovVaccBr),
  VaccDate = VaccDate,
  case = case,
  DatePos = DatePos
)

# Print the first few rows of the dataset
head(DummyData)


```




